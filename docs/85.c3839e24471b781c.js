"use strict";(self.webpackChunkpos_web_client=self.webpackChunkpos_web_client||[]).push([[85],{3093:(p,c,a)=>{a.r(c),a.d(c,{default:()=>b});var t=a(6242),s=a(6814),d=a(8151),u=a(9310),f=a(3947);const y=(i,g)=>g.id,h=i=>["edit",i];function v(i,g){if(1&i&&(t.TgZ(0,"div",5)(1,"div")(2,"p",6),t._uU(3),t.qZA(),t.TgZ(4,"p",7),t._uU(5),t.qZA(),t._UZ(6,"span",8),t.qZA(),t.TgZ(7,"div")(8,"a",9),t._uU(9,"Editar"),t.qZA()()()),2&i){const o=g.$implicit;t.xp6(3),t.hij(" ",o.name," "),t.xp6(2),t.Oqu(o.description),t.xp6(1),t.Q6J("recordStatus",o.isActive),t.xp6(2),t.Q6J("routerLink",t.VKq(4,h,o.id))}}let C=(()=>{class i{constructor(){this._categoryService=(0,t.f3M)(d.H),this.categories$=this._categoryService.getCategories()}static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-category-list"]],standalone:!0,features:[t.jDz],decls:10,vars:2,consts:[[1,"wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fs-3"],["routerLink","add",1,"btn","btn-primary"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"fw-medium","fs-5","mb-0"],[1,"mb-2"],[1,"badge","rounded-pill",3,"recordStatus"],[1,"btn",3,"routerLink"],["class","list-group-item d-flex justify-content-between align-items-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Categor\xedas"),t.qZA(),t.TgZ(4,"a",3),t._uU(5,"Nueva Categor\xeda"),t.qZA()(),t.TgZ(6,"div",4),t.SjG(7,v,10,6,"div",10,y),t.ALo(9,"async"),t.qZA()()),2&e&&t.wJu(7,t.lcZ(9,0,n.categories$))},dependencies:[s.ez,s.Ov,u.Bz,u.rH,f.Y],styles:[".wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;width:100%}"]})}return i})();var Z=a(7394),A=a(4664),T=a(2096),r=a(95);let m=(()=>{class i{constructor(){this._activatedRoute=(0,t.f3M)(u.gz),this._router=(0,t.f3M)(u.F0),this._categoryService=(0,t.f3M)(d.H),this._subscription=new Z.w0,this.categoryId=null,this.categoryForm=(0,t.f3M)(r.qu).nonNullable.group({name:["",[r.kI.required,r.kI.minLength(3)]],description:[""],slug:["",[r.kI.required,r.kI.minLength(3)]],isActive:[!0,r.kI.required]}),this._subscription.add(this.getDataAndSetFormValues()),(0,t.f3M)(t.ktI).onDestroy(()=>{this._subscription.unsubscribe()})}getDataAndSetFormValues(){return this.getCategoryDetails().subscribe(o=>{o&&this.setDefaultFormValues(o)})}getCategoryDetails(){return this._activatedRoute.paramMap.pipe((0,A.w)(o=>{const e=o.get("id");return e?(this.categoryId=parseInt(e),this._categoryService.getCategoryById(this.categoryId)):(0,T.of)(null)}))}setDefaultFormValues(o){const{name:e,description:n,slug:l,isActive:S}=o;this.categoryForm.setValue({name:e,description:n,slug:l,isActive:S})}cancelAndReset(){this.categoryForm.reset(),this._router.navigateByUrl("categories")}createCategory(){const o=this.categoryForm.getRawValue();this._subscription.add(this._categoryService.createCategory({...o}).subscribe({next:e=>{this.cancelAndReset()},error:e=>console.error(e)}))}updateCategory(){const o=this.categoryForm.getRawValue();this._subscription.add(this._categoryService.updateCategory({...o},this.categoryId).subscribe({next:e=>{this.cancelAndReset()},error:e=>console.error(e)}))}saveChanges(){this.categoryId?this.updateCategory():this.createCategory()}static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-category-form"]],standalone:!0,features:[t.jDz],decls:29,vars:1,consts:[[1,"wrapper"],[1,"fs-3","mb-4"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","categoryName","placeholder","Nombre","formControlName","name",1,"form-control"],["for","categoryName"],["type","text","id","slug","placeholder","URL amigable (slug)","formControlName","slug",1,"form-control"],["for","slug"],["type","text","id","description","placeholder","Descripci\xf3n","formControlName","description",1,"form-control"],["for","description"],[1,"form-floating","mb-4"],["id","categoryState","formControlName","isActive",1,"form-select"],["value","false"],["value","true"],["for","categoryState"],[1,"d-flex","justify-content-end","column-gap-2"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Crear categor\xeda"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.saveChanges()}),t.TgZ(4,"div",3),t._UZ(5,"input",4),t.TgZ(6,"label",5),t._uU(7,"Nombre"),t.qZA()(),t.TgZ(8,"div",3),t._UZ(9,"input",6),t.TgZ(10,"label",7),t._uU(11,"URL amigable (slug)"),t.qZA()(),t.TgZ(12,"div",3),t._UZ(13,"input",8),t.TgZ(14,"label",9),t._uU(15,"Descripci\xf3n"),t.qZA()(),t.TgZ(16,"div",10)(17,"select",11)(18,"option",12),t._uU(19,"Inactivo"),t.qZA(),t.TgZ(20,"option",13),t._uU(21,"Activo"),t.qZA()(),t.TgZ(22,"label",14),t._uU(23,"Estado"),t.qZA()(),t.TgZ(24,"div",15)(25,"button",16),t.NdJ("click",function(){return n.cancelAndReset()}),t._uU(26," Cancelar "),t.qZA(),t.TgZ(27,"button",17),t._uU(28,"Guardar cambios"),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.categoryForm))},dependencies:[s.ez,r.UX,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;max-width:480px;width:100%}"]})}return i})();const b=[{path:"",pathMatch:"full",component:C},{path:"add",component:m},{path:"edit/:id",component:m}]},7845:(p,c,a)=>{a.d(c,{S:()=>t});var t=function(s){return s.QUOTATIONS="quotation_header",s.QUOTATION_ITEMS="quotation_items",s.PRODUCTS="products",s.CATEGORIES="categories",s.SCHOOL_GRADES="school_grades",s.SCHOOLS="schools",s.PROMOTION_TYPE="promotion_type",s}(t||{})}}]);