import{a as $,b as h,c as j}from"./chunk-NNRCAFV2.js";import"./chunk-TSU7TQCJ.js";import"./chunk-4XK6EW7Y.js";import"./chunk-IYGD5RLS.js";import"./chunk-2GGKUGBM.js";import"./chunk-BJOKIBL3.js";import"./chunk-IZ562D3N.js";import"./chunk-EEKLCBUA.js";import"./chunk-VQZAQ2JT.js";import{e as L,g as z,h as I,l as C}from"./chunk-FXASF4B2.js";import{Ga as Q,Jb as B,Kb as R,Lb as A,Mb as N,Na as E,Nb as O,Oa as S,Ob as b,Pa as i,Pb as y,Qa as e,Ra as P,U as s,Ua as M,W as v,Wa as t,Xa as r,Ya as c,a as D,bb as q,db as k,eb as m,fb as f,gb as x,hb as F,ib as H,kb as T,va as n,za as w}from"./chunk-FFFHX7KO.js";import"./chunk-JENGY3ED.js";import"./chunk-FK6H3RFT.js";import{e as g}from"./chunk-5FZOKLP6.js";var K=(l,o)=>o.id,W=l=>["/quotations",l];function X(l,o){if(l&1&&(i(0,"tr")(1,"td"),t(2),e(),i(3,"td"),t(4),e(),i(5,"td"),t(6),e(),i(7,"td"),t(8),e(),i(9,"td"),t(10),m(11,"currency"),e(),i(12,"td")(13,"a",7),t(14,"Ver detalles"),e()()()),l&2){let u=o.$implicit;n(2),r(u.id),n(2),r(u.customerName),n(2),r(u.gradeName),n(2),r(u.date),n(2),r(x(11,6,u.totalAmmount,"GTQ")),n(3),Q("routerLink",k(9,W,u.id))}}var G=(()=>{let o=class o{constructor(){this._quotationService=s(h),this.quotations$=s(h).getQuotations()}};o.\u0275fac=function(d){return new(d||o)},o.\u0275cmp=v({type:o,selectors:[["ng-component"]],standalone:!0,features:[q],decls:24,vars:2,consts:[[1,"view-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fs-3"],["routerLink","./add",1,"btn","btn-primary"],[1,"table","table-responsive","align-middle"],["scope","col"],["scope","col","colspan","2"],[1,"btn",3,"routerLink"]],template:function(d,a){d&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),t(3,"Cotizaciones"),e(),i(4,"a",3),t(5,"Nueva Cotizaci\xF3n"),e()(),i(6,"div")(7,"table",4)(8,"thead")(9,"tr")(10,"th",5),t(11,"#"),e(),i(12,"th",5),t(13,"Cliente"),e(),i(14,"th",5),t(15,"Grado"),e(),i(16,"th",5),t(17,"Fecha"),e(),i(18,"th",6),t(19,"Total"),e()()(),i(20,"tbody"),E(21,X,15,11,"tr",null,K),m(23,"async"),e()()()()),d&2&&S(21,f(23,0,a.quotations$))},dependencies:[y,B,b,C,I],styles:["[_nghost-%COMP%]{display:block}.view-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}"]});let l=o;return l})();var Y=["quote"],ee=(l,o)=>o.id;function te(l,o){if(l&1&&(i(0,"tr")(1,"td"),t(2),m(3,"titlecase"),e(),i(4,"td",7),t(5),e(),i(6,"td",7),t(7),m(8,"number"),e(),i(9,"td",7),t(10),m(11,"number"),e(),i(12,"td",7),t(13),m(14,"number"),e()()),l&2){let u=o.$implicit;n(2),r(f(3,5,u.description)),n(3),r(u.quantity),n(2),r(x(8,7,u.price,"1.2-3")),n(3),r(x(11,10,u.discount,"1.2-3")),n(3),r(x(14,13,u.ammount,"1.2-3"))}}var U=(()=>{let o=class o{get totalDiscount(){return this.quotationItems.reduce((p,d)=>p+d.discount,0)}constructor(){this._quotationService=s(h),this._activedRoute=s(L),this._router=s(z),this._pdfMaker=s($),this._subscription=new D,this.quotationId=0,this.quotationHeader=void 0,this.quotationItems=[],this.watchUrlParams(),this.getQuoteDetails(),s(w).onDestroy(()=>this._subscription.unsubscribe())}watchUrlParams(){this._subscription.add(this._activedRoute.paramMap.subscribe(p=>this.quotationId=Number(p.get("id"))))}makeAndDownloadPDF(){if(this.quoteElement&&this.quotationItems.length>1){let p=this.quoteElement.nativeElement;this._pdfMaker.generatePDF(p,`Cotizaci\xF3n #${this.quotationId}`)}}getQuoteDetails(){return g(this,null,function*(){let p=yield this._quotationService.getQuotationById(this.quotationId);if(p){this.quotationHeader=p;let d=yield this._quotationService.getQuotationItems(this.quotationId);this.quotationItems=d}else this._router.navigateByUrl("/quotations")})}};o.\u0275fac=function(d){return new(d||o)},o.\u0275cmp=v({type:o,selectors:[["app-quotation-details"]],viewQuery:function(d,a){if(d&1&&H(Y,5),d&2){let _;F(_=T())&&(a.quoteElement=_.first)}},standalone:!0,features:[q],decls:84,vars:33,consts:[[1,"d-flex","justify-content-center","my-4","column-gap-2"],["routerLink","../",1,"btn","btn-outline-secondary"],["target","_blank",1,"btn","btn-primary",3,"click"],[1,"quotation"],["quote",""],[1,"d-flex","justify-content-between"],[1,"fs-3","fw-medium"],[1,"text-end"],[1,"fs-4","fw-medium"],[1,"mb-4","mt-2"],[1,"d-flex","justify-content-between","mb-4"],[1,"fs-5","fw-medium"],[1,"metadata"],[1,"fw-medium"],[1,"mb-5"],[1,"table","align-middle"],[1,"table-light","text-dark-emphasis"],[1,"table-header"],[1,"table-header","text-end"],["colspan","3",1,"fw-medium"],[1,"fw-medium","text-end"],[1,"text-center"]],template:function(d,a){d&1&&(i(0,"div",0)(1,"a",1),t(2,"Regresar"),e(),i(3,"button",2),M("click",function(){return a.makeAndDownloadPDF()}),t(4," Generar PDF "),e()(),i(5,"div",3,4)(7,"section",5)(8,"div")(9,"p",6),t(10,"Librer\xEDa La Joya"),e()(),i(11,"div",7)(12,"p",8),t(13),e()()(),P(14,"hr",9),i(15,"section",10)(16,"div")(17,"p",11),t(18,"Datos Cliente"),e(),i(19,"p",12)(20,"span",13),t(21,"Cliente:"),e(),t(22),e(),i(23,"p",12)(24,"span",13),t(25,"Estudiante:"),e(),t(26),e(),i(27,"p",12)(28,"span",13),t(29,"Grado Acad\xE9mico:"),e(),t(30),e(),i(31,"p",12)(32,"span",13),t(33,"Centro Educativo:"),e(),t(34),e()(),i(35,"div",7)(36,"p",11),t(37,"Datos Documento"),e(),i(38,"p",12)(39,"span",13),t(40,"Fecha Cotizaci\xF3n:"),e(),t(41),m(42,"date"),e(),i(43,"p",12)(44,"span",13),t(45,"Promoci\xF3n:"),e(),t(46),e()()(),i(47,"section",14)(48,"table",15)(49,"thead")(50,"tr",16)(51,"th",17),t(52),m(53,"uppercase"),e(),i(54,"th",18),t(55),m(56,"uppercase"),e(),i(57,"th",18),t(58),m(59,"uppercase"),e(),i(60,"th",18),t(61),m(62,"uppercase"),e(),i(63,"th",18),t(64),m(65,"uppercase"),e()()(),i(66,"tbody"),E(67,te,15,16,"tr",null,ee),e(),i(69,"tfoot")(70,"tr",16)(71,"td",19),t(72,"Total"),e(),i(73,"td",7),t(74),m(75,"currency"),e(),i(76,"td",20),t(77),m(78,"currency"),e()()()()(),i(79,"section",21)(80,"p",12)(81,"span",13),t(82,"Observaciones:"),e(),t(83," La vigencia de esta cotizaci\xF3n es de 15 d\xEDas h\xE1biles a partir de la fecha de emisi\xF3n. "),e()()()),d&2&&(n(13),c(" COTIZACI\xD3N #",a.quotationHeader==null?null:a.quotationHeader.id," "),n(9),c(" ",a.quotationHeader==null?null:a.quotationHeader.customerName," "),n(4),c(" ",a.quotationHeader==null?null:a.quotationHeader.studentName," "),n(4),c(" ",a.quotationHeader==null?null:a.quotationHeader.gradeName," "),n(4),c(" ",a.quotationHeader==null?null:a.quotationHeader.schoolName," "),n(7),c(" ",x(42,14,a.quotationHeader==null?null:a.quotationHeader.date,"dd/MM/yyyy")," "),n(5),c(" ",a.quotationHeader==null?null:a.quotationHeader.promotionDescription," "),n(6),r(f(53,17,"Descripci\xF3n")),n(3),r(f(56,19,"Cantidad")),n(3),r(f(59,21,"Precio")),n(3),r(f(62,23,"Descuento")),n(3),r(f(65,25,"Total")),S(67,a.quotationItems),n(10),r(x(75,27,a.totalDiscount,"GTQ")),n(3),c(" ",x(78,30,a.quotationHeader==null?null:a.quotationHeader.totalAmmount,"GTQ")," "))},dependencies:[y,A,O,R,b,N,C,I],styles:[".quotation[_ngcontent-%COMP%]{margin:40px auto;max-width:800px;width:100%}.metadata[_ngcontent-%COMP%]{font-size:14px;margin-bottom:6px}.table-header[_ngcontent-%COMP%]{font-size:14px}"]});let l=o;return l})();var ie=[{path:"",component:G,pathMatch:"full"},{path:"add",component:j},{path:":id",component:U}],ye=ie;export{ye as default};
