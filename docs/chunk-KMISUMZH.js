import{a as h}from"./chunk-KVTM3677.js";import{a as Q}from"./chunk-IYGD5RLS.js";import"./chunk-BJOKIBL3.js";import{a as G,b as p,c as O,d as B,f as U,i as $,j as q,k as P,l as z,m as H,o as J,p as K}from"./chunk-EEKLCBUA.js";import{e as L,g as k,h as T,l as j}from"./chunk-FXASF4B2.js";import{Ga as d,I as F,Jb as V,Na as D,Oa as R,Pa as e,Pb as y,Qa as i,Ra as l,U as s,Ua as S,W as g,Wa as o,Xa as w,Ya as N,a as _,bb as f,db as A,eb as M,fb as I,j as x,va as c,za as E}from"./chunk-FFFHX7KO.js";import"./chunk-JENGY3ED.js";import{a as b}from"./chunk-5FZOKLP6.js";var Z=(a,r)=>r.id,ee=a=>["edit",a];function te(a,r){if(a&1&&(e(0,"div",5)(1,"div")(2,"p",6),o(3),i(),e(4,"p",7),o(5),i(),l(6,"span",8),i(),e(7,"div")(8,"a",9),o(9,"Editar"),i()()()),a&2){let u=r.$implicit;c(3),N(" ",u.name," "),c(2),w(u.description),c(1),d("recordStatus",u.isActive),c(2),d("routerLink",A(4,ee,u.id))}}var W=(()=>{let r=class r{constructor(){this._categoryService=s(h),this.categories$=this._categoryService.getCategories()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=g({type:r,selectors:[["app-category-list"]],standalone:!0,features:[f],decls:10,vars:2,consts:[[1,"wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fs-3"],["routerLink","add",1,"btn","btn-primary"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"fw-medium","fs-5","mb-0"],[1,"mb-2"],[1,"badge","rounded-pill",3,"recordStatus"],[1,"btn",3,"routerLink"],["class","list-group-item d-flex justify-content-between align-items-center"]],template:function(t,m){t&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Categor\xEDas"),i(),e(4,"a",3),o(5,"Nueva Categor\xEDa"),i()(),e(6,"div",4),D(7,te,10,6,"div",10,Z),M(9,"async"),i()()),t&2&&R(7,I(9,0,m.categories$))},dependencies:[y,V,j,T,Q],styles:[".wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;width:100%}"]});let a=r;return a})();var C=(()=>{let r=class r{constructor(){this._activatedRoute=s(L),this._router=s(k),this._categoryService=s(h),this._subscription=new _,this.categoryId=null,this.categoryForm=s(J).nonNullable.group({name:["",[p.required,p.minLength(3)]],description:[""],slug:["",[p.required,p.minLength(3)]],isActive:[!0,p.required]}),this._subscription.add(this.getDataAndSetFormValues()),s(E).onDestroy(()=>{this._subscription.unsubscribe()})}getDataAndSetFormValues(){return this.getCategoryDetails().subscribe(n=>{n&&this.setDefaultFormValues(n)})}getCategoryDetails(){return this._activatedRoute.paramMap.pipe(F(n=>{let t=n.get("id");return t?(this.categoryId=parseInt(t),this._categoryService.getCategoryById(this.categoryId)):x(null)}))}setDefaultFormValues(n){let{name:t,description:m,slug:v,isActive:X}=n;this.categoryForm.setValue({name:t,description:m,slug:v,isActive:X})}cancelAndReset(){this.categoryForm.reset(),this._router.navigateByUrl("categories")}createCategory(){let n=this.categoryForm.getRawValue();this._subscription.add(this._categoryService.createCategory(b({},n)).subscribe({next:t=>{this.cancelAndReset()},error:t=>console.error(t)}))}updateCategory(){let n=this.categoryForm.getRawValue();this._subscription.add(this._categoryService.updateCategory(b({},n),this.categoryId).subscribe({next:t=>{this.cancelAndReset()},error:t=>console.error(t)}))}saveChanges(){this.categoryId?this.updateCategory():this.createCategory()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=g({type:r,selectors:[["app-category-form"]],standalone:!0,features:[f],decls:29,vars:1,consts:[[1,"wrapper"],[1,"fs-3","mb-4"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","categoryName","placeholder","Nombre","formControlName","name",1,"form-control"],["for","categoryName"],["type","text","id","slug","placeholder","URL amigable (slug)","formControlName","slug",1,"form-control"],["for","slug"],["type","text","id","description","placeholder","Descripci\xF3n","formControlName","description",1,"form-control"],["for","description"],[1,"form-floating","mb-4"],["id","categoryState","formControlName","isActive",1,"form-select"],["value","false"],["value","true"],["for","categoryState"],[1,"d-flex","justify-content-end","column-gap-2"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,m){t&1&&(e(0,"div",0)(1,"h1",1),o(2,"Crear categor\xEDa"),i(),e(3,"form",2),S("ngSubmit",function(){return m.saveChanges()}),e(4,"div",3),l(5,"input",4),e(6,"label",5),o(7,"Nombre"),i()(),e(8,"div",3),l(9,"input",6),e(10,"label",7),o(11,"URL amigable (slug)"),i()(),e(12,"div",3),l(13,"input",8),e(14,"label",9),o(15,"Descripci\xF3n"),i()(),e(16,"div",10)(17,"select",11)(18,"option",12),o(19,"Inactivo"),i(),e(20,"option",13),o(21,"Activo"),i()(),e(22,"label",14),o(23,"Estado"),i()(),e(24,"div",15)(25,"button",16),S("click",function(){return m.cancelAndReset()}),o(26," Cancelar "),i(),e(27,"button",17),o(28,"Guardar cambios"),i()()()()),t&2&&(c(3),d("formGroup",m.categoryForm))},dependencies:[y,K,U,z,H,G,P,O,B,$,q],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;max-width:480px;width:100%}"]});let a=r;return a})();var ie=[{path:"",pathMatch:"full",component:W},{path:"add",component:C},{path:"edit/:id",component:C}],Fe=ie;export{Fe as default};
