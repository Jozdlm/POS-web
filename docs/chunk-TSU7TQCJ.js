import{a as c}from"./chunk-BJOKIBL3.js";import{N as d,U as u,Ub as f,i as a,n as s}from"./chunk-FFFHX7KO.js";var n=class{static toEntity(t){if(!t.id)throw new Error("The id should provided to map from Dto to Entity");return{id:t.id,barcode:t.barcode,name:t.name,sellingPrice:t.selling_price,inStock:t.in_stock,isActive:t.is_active,categoryId:t.category_id}}static toDto(t){return{name:t.name,barcode:t.barcode,selling_price:t.sellingPrice,in_stock:t.inStock,is_active:t.isActive,category_id:t.categoryId}}};function l(o){return o=o.trim().toLowerCase(),o.replace(/\b\w/g,t=>t.toUpperCase())}var S=(()=>{let t=class t{constructor(){this._db=u(f).supabase}getProductCount(){return a(this._db.from(c.PRODUCTS).select("*",{count:"exact",head:!0})).pipe(s(({count:r,error:e})=>{if(e)throw new Error(e?.message);return r||0}))}getProducts(){return a(this._db.from(c.PRODUCTS).select("*").order("id",{ascending:!0}).range(0,49)).pipe(s(({data:r,error:e})=>{if(e)throw new Error(e.message);return r.map(i=>n.toEntity(i))}))}getProductsBy({query:r,field:e,limit:i}){return r=l(r),a(this._db.from(c.PRODUCTS).select("*").ilike(e,`%${r}%`).range(0,i-1)).pipe(s(({data:p,error:m})=>{if(m)throw new Error(m.message);return p.map(g=>n.toEntity(g))}))}getProductById(r){return a(this._db.from(c.PRODUCTS).select("*").eq("id",r)).pipe(s(({data:e,error:i})=>{if(i)throw new Error(i.message);return n.toEntity(e[0])}))}createProduct(r){let e=n.toDto(r);return a(this._db.from(c.PRODUCTS).insert(e)).pipe(s(({status:i,error:p})=>{if(p)throw new Error(p.message);return i===201}))}updateProduct(r,e){let i=n.toDto(e);return a(this._db.from(c.PRODUCTS).update(i).eq("id",r)).pipe(s(({status:p,error:m})=>{if(m)throw new Error(m.message);return p===204}))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();export{S as a};
