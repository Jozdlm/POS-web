"use strict";(self.webpackChunkpos_web_client=self.webpackChunkpos_web_client||[]).push([[990],{7990:(y,c,a)=>{a.r(c),a.d(c,{default:()=>v});var u=a(6814),t=a(6242),r=a(9310),d=a(5449);const p=(n,s)=>s.id,m=n=>["/quotations",n];function q(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td")(13,"a",7),t._uU(14,"Ver detalles"),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.customerName),t.xp6(2),t.Oqu(e.gradeName),t.xp6(2),t.Oqu(e.date),t.xp6(2),t.Oqu(t.xi3(11,6,e.totalAmmount,"GTQ")),t.xp6(3),t.Q6J("routerLink",t.VKq(9,m,e.id))}}let Z=(()=>{class n{constructor(){this._quotationService=(0,t.f3M)(d.G),this.quotations$=(0,t.f3M)(d.G).getQuotations()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:24,vars:2,consts:[[1,"view-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fs-3"],["routerLink","./add",1,"btn","btn-primary"],[1,"table","table-responsive","align-middle"],["scope","col"],["scope","col","colspan","2"],[1,"btn",3,"routerLink"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Cotizaciones"),t.qZA(),t.TgZ(4,"a",3),t._uU(5,"Nueva Cotizaci\xf3n"),t.qZA()(),t.TgZ(6,"div")(7,"table",4)(8,"thead")(9,"tr")(10,"th",5),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"Cliente"),t.qZA(),t.TgZ(14,"th",5),t._uU(15,"Grado"),t.qZA(),t.TgZ(16,"th",5),t._uU(17,"Fecha"),t.qZA(),t.TgZ(18,"th",6),t._uU(19,"Total"),t.qZA()()(),t.TgZ(20,"tbody"),t.SjG(21,q,15,11,"tr",null,p),t.ALo(23,"async"),t.qZA()()()()),2&i&&t.wJu(21,t.lcZ(23,0,o.quotations$))},dependencies:[u.ez,u.Ov,u.H9,r.Bz,r.rH],styles:["[_nghost-%COMP%]{display:block}.view-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}"]})}return n})();var h=a(7966),g=a(5861),A=a(7394),T=a(774);const f=["quote"],_=(n,s)=>s.id;function U(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td",7),t._uU(5),t.qZA(),t.TgZ(6,"td",7),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",7),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td",7),t._uU(13),t.ALo(14,"number"),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.description)),t.xp6(3),t.Oqu(e.quantity),t.xp6(2),t.Oqu(t.xi3(8,7,e.price,"1.2-3")),t.xp6(3),t.Oqu(t.xi3(11,10,e.discount,"1.2-3")),t.xp6(3),t.Oqu(t.xi3(14,13,e.ammount,"1.2-3"))}}const v=[{path:"",component:Z,pathMatch:"full"},{path:"add",component:h.AddQuotationComponent},{path:":id",component:(()=>{class n{get totalDiscount(){return this.quotationItems.reduce((e,i)=>e+i.discount,0)}constructor(){this._quotationService=(0,t.f3M)(d.G),this._activedRoute=(0,t.f3M)(r.gz),this._router=(0,t.f3M)(r.F0),this._pdfMaker=(0,t.f3M)(T.c),this._subscription=new A.w0,this.quotationId=0,this.quotationHeader=void 0,this.quotationItems=[],this.watchUrlParams(),this.getQuoteDetails(),(0,t.f3M)(t.ktI).onDestroy(()=>this._subscription.unsubscribe())}watchUrlParams(){this._subscription.add(this._activedRoute.paramMap.subscribe(e=>this.quotationId=Number(e.get("id"))))}makeAndDownloadPDF(){this.quoteElement&&this.quotationItems.length>1&&this._pdfMaker.generatePDF(this.quoteElement.nativeElement,`Cotizaci\xf3n #${this.quotationId}`)}getQuoteDetails(){var e=this;return(0,g.Z)(function*(){const i=yield e._quotationService.getQuotationById(e.quotationId);if(i){e.quotationHeader=i;const o=yield e._quotationService.getQuotationItems(e.quotationId);e.quotationItems=o}else e._router.navigateByUrl("/quotations")})()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-quotation-details"]],viewQuery:function(i,o){if(1&i&&t.Gf(f,5),2&i){let l;t.iGM(l=t.CRH())&&(o.quoteElement=l.first)}},standalone:!0,features:[t.jDz],decls:84,vars:33,consts:[[1,"d-flex","justify-content-center","my-4","column-gap-2"],["routerLink","../",1,"btn","btn-outline-secondary"],["target","_blank",1,"btn","btn-primary",3,"click"],[1,"quotation"],["quote",""],[1,"d-flex","justify-content-between"],[1,"fs-3","fw-medium"],[1,"text-end"],[1,"fs-4","fw-medium"],[1,"mb-4","mt-2"],[1,"d-flex","justify-content-between","mb-4"],[1,"fs-5","fw-medium"],[1,"metadata"],[1,"fw-medium"],[1,"mb-5"],[1,"table","align-middle"],[1,"table-light","text-dark-emphasis"],[1,"table-header"],[1,"table-header","text-end"],["colspan","3",1,"fw-medium"],[1,"fw-medium","text-end"],[1,"text-center"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"Regresar"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.makeAndDownloadPDF()}),t._uU(4," Generar PDF "),t.qZA()(),t.TgZ(5,"div",3,4)(7,"section",5)(8,"div")(9,"p",6),t._uU(10,"Librer\xeda La Joya"),t.qZA()(),t.TgZ(11,"div",7)(12,"p",8),t._uU(13),t.qZA()()(),t._UZ(14,"hr",9),t.TgZ(15,"section",10)(16,"div")(17,"p",11),t._uU(18,"Datos Cliente"),t.qZA(),t.TgZ(19,"p",12)(20,"span",13),t._uU(21,"Cliente:"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"p",12)(24,"span",13),t._uU(25,"Estudiante:"),t.qZA(),t._uU(26),t.qZA(),t.TgZ(27,"p",12)(28,"span",13),t._uU(29,"Grado Acad\xe9mico:"),t.qZA(),t._uU(30),t.qZA(),t.TgZ(31,"p",12)(32,"span",13),t._uU(33,"Centro Educativo:"),t.qZA(),t._uU(34),t.qZA()(),t.TgZ(35,"div",7)(36,"p",11),t._uU(37,"Datos Documento"),t.qZA(),t.TgZ(38,"p",12)(39,"span",13),t._uU(40,"Fecha Cotizaci\xf3n:"),t.qZA(),t._uU(41),t.ALo(42,"date"),t.qZA(),t.TgZ(43,"p",12)(44,"span",13),t._uU(45,"Promoci\xf3n:"),t.qZA(),t._uU(46),t.qZA()()(),t.TgZ(47,"section",14)(48,"table",15)(49,"thead")(50,"tr",16)(51,"th",17),t._uU(52),t.ALo(53,"uppercase"),t.qZA(),t.TgZ(54,"th",18),t._uU(55),t.ALo(56,"uppercase"),t.qZA(),t.TgZ(57,"th",18),t._uU(58),t.ALo(59,"uppercase"),t.qZA(),t.TgZ(60,"th",18),t._uU(61),t.ALo(62,"uppercase"),t.qZA(),t.TgZ(63,"th",18),t._uU(64),t.ALo(65,"uppercase"),t.qZA()()(),t.TgZ(66,"tbody"),t.SjG(67,U,15,16,"tr",null,_),t.qZA(),t.TgZ(69,"tfoot")(70,"tr",16)(71,"td",19),t._uU(72,"Total"),t.qZA(),t.TgZ(73,"td",7),t._uU(74),t.ALo(75,"currency"),t.qZA(),t.TgZ(76,"td",20),t._uU(77),t.ALo(78,"currency"),t.qZA()()()()(),t.TgZ(79,"section",21)(80,"p",12)(81,"span",13),t._uU(82,"Observaciones:"),t.qZA(),t._uU(83," La vigencia de esta cotizaci\xf3n es de 15 d\xedas h\xe1biles a partir de la fecha de emisi\xf3n. "),t.qZA()()()),2&i&&(t.xp6(13),t.hij(" COTIZACI\xd3N #",null==o.quotationHeader?null:o.quotationHeader.id," "),t.xp6(9),t.hij(" ",null==o.quotationHeader?null:o.quotationHeader.customerName," "),t.xp6(4),t.hij(" ",null==o.quotationHeader?null:o.quotationHeader.studentName," "),t.xp6(4),t.hij(" ",null==o.quotationHeader?null:o.quotationHeader.gradeName," "),t.xp6(4),t.hij(" ",null==o.quotationHeader?null:o.quotationHeader.schoolName," "),t.xp6(7),t.hij(" ",t.xi3(42,14,null==o.quotationHeader?null:o.quotationHeader.date,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",null==o.quotationHeader?null:o.quotationHeader.promotionDescription," "),t.xp6(6),t.Oqu(t.lcZ(53,17,"Descripci\xf3n")),t.xp6(3),t.Oqu(t.lcZ(56,19,"Cantidad")),t.xp6(3),t.Oqu(t.lcZ(59,21,"Precio")),t.xp6(3),t.Oqu(t.lcZ(62,23,"Descuento")),t.xp6(3),t.Oqu(t.lcZ(65,25,"Total")),t.wJu(67,o.quotationItems),t.xp6(10),t.Oqu(t.xi3(75,27,o.totalDiscount,"GTQ")),t.xp6(3),t.hij(" ",t.xi3(78,30,null==o.quotationHeader?null:o.quotationHeader.totalAmmount,"GTQ")," "))},dependencies:[u.ez,u.gd,u.JJ,u.rS,u.H9,u.uU,r.Bz,r.rH],styles:[".quotation[_ngcontent-%COMP%]{margin:40px auto;max-width:800px;width:100%}.metadata[_ngcontent-%COMP%]{font-size:14px;margin-bottom:6px}.table-header[_ngcontent-%COMP%]{font-size:14px}"]})}return n})()}]}}]);